<div align="center">

<img src="../images/logo.png" style="width: 128px;">

# XSiteGen 2.0
#### *[English](README.md) / Русский*

</div>

**XSiteGen** — генератор статических сайтов, разработанный с упором на простоту и минимализм.

Буква "X" в названии проекта — от слова "experimental" (экспериментальный), поскольку проект был начат мной как эксперимент, для личных потребностей и изучения базовых принципов работы подобных генераторов.

<div align="center">

![](../images/screenshot.png)

</div>

## Содержание

- [Установка](#установка)
    - [Зависимости](#зависимости)
    - [Клонируем репозиторий](#клонируем-репозиторий)
    - [GitHub Releases](#github-releases)
- [Использование](#использование)
    - [Командная строка](#командная-строка)
    - [Настройка](#настройка)
    - [Переменные](#переменные)
    - [Файлы](#файлы)
    - [Демо](#демо)
- [История](#история)
- [Участие в проекте](#участие-в-проекте)
- [Авторы](#авторы)
- [Лицензия](#лицензия)

## Установка

### Зависимости

XSiteGen требует [Python](https://www.python.org) версии 3.10 (или новее) и библиотеку [Python-Markdown](https://python-markdown.github.io) для обработки текста в формате Markdown. Последняя может быть установлена при помощи пакетного менеджера pip:

```
$ pip install markdown
```

> [!WARNING]
>
> **Предупреждение для пользователей Windows:** Windows 8 или новее требуется для запуска Python версии 3.10.

### Клонируем репозиторий

Установите [Git](https://git-scm.com), если у Вас его нет, и выполните следующую команду:

```
$ git clone https://github.com/ivan-movchan/xsitegen
```

После клонирования репозитория у Вас будет возможность легко обновлять XSiteGen, выполнив команду `git pull` в папке с программой.

### GitHub Releases

Можно загрузить дистрибутивы XSiteGen со страницы ["Releases"](https://github.com/ivan-movchan/xsitegen/releases), где также доступны старые версии программы.

## Использование

### Командная строка

```
$ xsitegen [-hvV]
```

**Команды:**

- `-h`: Вывести краткое справочное сообщение и выйти.
- `-V`: Вывести версию программы и выйти.

**Параметры:**

- `-v`: Вести подробный журнал.

При запуске XSiteGen немедленно загрузит конфигурационный модуль и начнёт генерировать сайт.

По завершении работы XSiteGen вернёт один из следующих кодов:

- `0`: Ошибок нет.
- `1`: Возникла ошибка загрузки модуля.
- `2`: Возникла ошибка при работе с файлами.
- `3`: Запущенная версия Python ниже требуемой (подробности в разделе "Установка").
- `42`: XSiteGen был загружен другим модулем, а не запущен как самостоятельное приложение.

> [!TIP]
>
> При желании Вы можете добавить путь к XSiteGen в переменную среды окружения `PATH`, чтобы иметь возможность запускать XSiteGen из любой папки, просто введя `xsitegen` (или `xsitegen.py`) в консоль.

> [!CAUTION]
> 
> **Предупреждение для пользователей Windows:** если Python установлен с использованием Python install manager, для запуска XSiteGen строго рекомендуется создать и использовать специальный Batch-скрипт `xsitegen.bat` со следующей командой:
>
> ```
> @"PYTHON_INSTALLATION_PATH\python.exe" "XSITEGEN_LOCATION_PATH\xsitegen.py" %*
> ```
> 
> `PYTHON_INSTALLATION_PATH` стоит заменить на путь к рабочей инсталляции Python (например, `%localappdata%\Python\pythoncore-3.14-64`), а `XSITEGEN_LOCATION_PATH` — на путь к XSiteGen (например, `C:\XSiteGen`).
> 
> Это решение не позволит XSiteGen запускаться в отдельном, быстро исчезающем окне консоли. В противном случае Вы не сможете увидеть журнал программы и сообщения об ошибках. Проблема связана с серьёзными изменениями в самой Windows (если верить [комментарию](https://github.com/python/pymanager/issues/193#issuecomment-3401904396) одного из разработчиков Python install manager) и не связана конкретно с XSiteGen.

### Настройка

Для настройки XSiteGen используется конфигурационный модуль `config.py`, который может располагаться где угодно.

Если XSiteGen не смог загрузить этот модуль, Вам придётся создать его вручную. Если модуль нашёлся, но в нём есть ошибки, Вы увидите краткое сообщение об ошибке, возникшей при его загрузке.

Все поддерживаемые настройки можно найти в модуле [xsitegen/default_settings.py](xsitegen/default_settings.py).

### Переменные

Переменные могут быть заданы и использованы в исходных файлах и даже в других переменных. Чтобы использовать значение переменной, укажите её имя в фигурных скобках. Имейте в виду, что XSiteGen чувствителен к регистру.

```html
<html>
    <head>
        <title>{page-title}</title>
    </head>
    <body>
        <h1>{title}</h1>
        <h4><em>{date}</em></h4>
        {content}
    </body>
</html>
```

**Общие (глобальные) переменные** задаются в конфигурационном модуле и применяются к каждому исходному файлу.

**Переменные директории (папки)** также задаются в конфигурационном модуле, но применяются к каждому исходному файлу лишь в заданных каталогах.

**Переменные страницы** применяются по отдельности к каждому исходному файлу, в начале которых они заданы.

```
---
title: My website
description: My page description.
date: 1970-01-01
blablabla
---
```

Обратите внимание, что последняя переменная будет содержать пустое значение, так как после её имени ничего не указано.

**Зарезервированные переменные:**

- `{content}`: содержимое исходного файла страницы, преобразованное из Markdown в HTML. **Обязательно должна быть в файлах шаблонов страниц.**
- `{datetime}`: временная отметка с датой и временем момента, когда страница была сгенерирована.

### Файлы

Структура каталога исходных файлов сайта, собираемого при помощи XSiteGen, может иметь следующий вид:

```
/
|-- config.py
|-- build/
|-- src/
    |-- templates/
        |-- template.html
    |-- files/
        |-- index.md
        |-- logo.png
        |-- blog/
            |-- 00-hello-world.md
```

- `config.py` содержит все пользовательские настройки, применяемые к сайту.
- `build/` будет содержать файлы собранного, готового к публикации сайта.
- `src/` содержит все исходные и дополнительные файлы, необходимые для сборки сайта.
    - `src/templates/` содержит шаблоны страниц в формате HTML.
    - `src/files/` содержит все исходные и, возможно, дополнительные файлы. Исходные файлы используются для генерации HTML-страниц. Все остальные (дополнительные) файлы будут просто скопированы в целевые каталоги, если Вы разрешили это при настройке программы.

### Демо

В папке [demo](../demo/) можно найти исходные файлы сайта, который можно использовать в качестве шаблона для разработки новых сайтов с использованием XSiteGen.

## История

История проекта и список изменений доступны в файле [CHANGELOG-RU.md](CHANGELOG-RU.md).

## Участие в проекте

Сообщайте о недочётах и предлагайте новые идеи на странице ["Issues"](https://github.com/ivan-movchan/xsitegen/issues), либо связавшись с разработчиком лично.

Вы также можете форкнуть репозиторий (конкретно, ветку `develop`), улучшить проект и направить pull request для приёма Ваших наработок в проект.

Спасибо за Ваш интерес к XSiteGen.

## Авторы

- **Иван Мовчан (@ivan-movchan)**\
  Автор и разработчик.

## Лицензия

XSiteGen — свободное программное обеспечение, распространяется на условиях лицензии MIT.
Подробности — в файле [LICENSE](LICENSE).